## 3.遇到的三问题

1. ### 问题1

   存在位置：base-alarm-module-impl ->BaseAlarmAPIImpl ->buildSpecification

   ~~~java
   Specification<AlarmEntity> baseSpecification = (root, query, criteriaBuilder) -> {
               // 业务逻辑
         return query.where(predicateList.toArray(newPredicate[predicateList.size()])).
             getRestriction();
   };
   ~~~

   ​    **其中业务逻辑部分无法覆盖 **

   

2. ### 问题2

   存在位置：base-alarm-module-web -> AlarmCtrl->BatchDeleteTask

   各类为内部类，即BatchDeleteTask在AlarmCtrl中，

   ~~~java
   public class AlarmCtrl {
       
       @Autowired
       private BaseAlarmAPI alarmAPI;
       
       class BatchDeleteTask extends AbstractBatchTaskHandler {
           @Override
           public BatchTaskItemResult processItem(BatchTaskItem item) throws      		                       BusinessException {
               ---
               alarmAPI.releaseAlarm(releaseAlarmRequest);
               ---
           }       
       }
   }
   ~~~

   ​       **在mock alarmAPI接口后，alarmAPI任为Null，alarmAPI.releaseAlarm(releaseAlarmRequest);抛空指针异常 **

3. ### 问题3

   存在位置：base-alarm-module-impl ->EmailServiceImpl->静态代码块，代码如下：

   ~~~java
       static {
           ClassPathResource classPathResource = new ClassPathResource(TEMPLATE_PATH);
           try {
               TEMPLATE = StreamUtils.copyToString(---, ---);
           } catch (IOException e) {
               throw new IllegalArgumentException("读取模版文件异常", e);
           }
       }
   ~~~

      **需要 StreamUtils.copyToString(---, ---);抛出异常，覆盖catch中的代码**